# 递归转循环

## 尾递归转循环

尾递归是递归的一种特殊形式，也是较为容易进行优化的情况。因此首先考虑尾递归时，递归转循环的转换方法。

## 普通递归转尾递归

尾递归可以转换为循环，因此如果存在将普通递归转换为尾递归的方法，就可以将普通递归函数优化为循环。

对于人工实现简单递归实例的转换，可能引入累加器就可以实现，样例见 [recursive2tail.cpp](recursive2tail.cpp)，但是转换过程需要求解运算的单位元，同时终止条件时返回值与累加器的运算需要人工推理，这意味着此类转换方法无法自动进行。

考虑引入函数式语言中的 `Continuation`。也即，在调用递归函数时，将当前的后续执行打包成一个闭包 `continuation` 传递给被调用的函数，函数在计算完成后，将结果传递给该闭包继续执行，然后返回，整个函数实现就变成了尾递归。这样一来，就可以使用优化尾递归的方法，将此递归函数转换为循环。事实上，这一方法可以使所有调用函数产生的函数栈消失，但是需要将所有函数的定义都进行改造，因此本项目仅考虑改造基于定义转换的递归函数，不包括预定义的函数。

假设 C++ 中存在这样的一个 `continuation`，则它其中需要包含如下内容：[TODO]

## 简单直接的递归转循环方法

> 本质和上面普通递归转尾递归后转循环得到的结果是相同的。

一个简单直接的想法是，手动地模拟递归函数的执行。在这一过程中，需要处理参数、返回值、局部变量和控制流。
